### NIEAKTUALNE!!! TODO: UAKTUALNIĆ
### 1. Kompilacja i ustawienie programu
TODO. Załóżmy, że po tym stopniu mamy executable o nazwie local_dns 
### 2. Dodanie lokalnego serwera do listy serwerów DNS
Aby nasz program działał potrzebujemy przekazać systemowi informację o tym gdzie znajduje się ten serwer. Aby zrobić to w sposób zgodny z dobrą praktyką użyjemy [openresolv](https://wiki.archlinux.org/index.php/Openresolv) (być może da się zrobić ten krok z pominięciem tej aplikacji).
Jeżeli nie masz zainstalowanego openresolv, zainstaluj go:
```sh
$ pacman -S openresolv
```
Następnie postępuj zgodnie z instrukcjami podlinkowanymi na [wiki openresolv](https://wiki.archlinux.org/index.php/Openresolv#Users) aby skonfigurować użytkowników openresolva tak aby z niego korzystali.

Do /etc/resovconf.conf dodaj linijki

```
resolv_conf_local_only=NO
name_servers=127.0.0.1
```
(w przypadku gdy chcesz mieć więcej niż jeden name_server, postępuj zgodnie z https://wiki.archlinux.org/index.php/Openresolv#Defining_multiple_values_for_options).
Uruchom:
```sh
$ sudo resolvconf -u
```
W pliku /etc/resolv.conf powinna być linia
```sh
# Generated by resolvconf
```
Jak i:
```sh
nameserver 127.0.0.1
```
W tym momencie jeżeli uruchomialibyśmy ręcznie nasz serwer, powinien on działać. Aby nie musieć tego robić potrzebujemy jeszcze kilku kroków

### 3. Automatyczne uruchamianie
Aby nasz serwer uruchamiał się automatycznie (w tym dokumencie będziemy chcieli żeby uruchamiany był przy zalogowaniu). W tym celu będziemy chcieli aby nasz program był traktowany jako serwis systemd.
Utwórz folder serwisów:
```sh
mkdir -p $HOME/.local/share/systemd/user
```

Otwórz przygotowany przez nas unit file:
```sh
vim installation/unit_file
```

Znajdź linijkę
```sh
ExecStart=sudo path_to_exec
```
I w miejsce path_to_exec wpisz absolutną ścieżkę do local_dns.

Następnie skopiuj ten plik do stworzonego wcześniej folderu:
```sh
sudo cp installation/unit_file $HOME/.local/share/systemd/user/local-dns.service
```
W końcu uruchom:
```sh
systemctl --user enable local-dns.service
```
Za każdym zalogowaniem local_dns powinien teraz działać